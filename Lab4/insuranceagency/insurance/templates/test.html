<!DOCTYPE html>
<html lang="en">
{% load static %}

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Студенты</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 5px;
            text-align: center;
        }

        h1 {
            margin-top: 0;
        }

        form {
            margin: 20px 0;
        }

        label {
            display: block;
            margin: 5px 0;
        }

        input, button {
            padding: 5px;
            margin: 5px 0;
        }

        button {
            background-color: #007BFF;
            color: #fff;
            border: none;
            cursor: pointer;
        }

        #result {
            margin: 20px 0;
        }

        ul {
            list-style: none;
            padding: 0;
        }

        li {
            margin: 5px 0;
        }

        table {
            border-collapse: collapse;
            border: 2px solid black;
            width: 400px;
            margin: 0 auto;
        }

        table, th, td {
            border: 1px solid black;
        }

        th, td {
            padding: 10px;
            text-align: center;
        }

        .hidden {
            display: none;
        }

    </style>
</head>
<body>
    <div class="container">
        <h1>Поиск учеников</h1>
        
        <form id="studentsForm">
            <label for="name">Имя студента:</label>
            <input type="text" id="name" name="name" required>
            <label for="surname">Фамилия студента:</label>
            <input type="text" id="surname" name="surname" required>
            <label for="patronymic">Отчество студента:</label>
            <input type="text" id="patronymic" name="patronymic" required>
            <label for="sex">Пол:</label>
            <input type="text" id="sex" name="sex" required>
            <label for="age">Возраст:</label>
            <input type="number" id="age" name="age" required>
            <label for="course">На каком курсе:</label>
            <input type="number" id="course" name="course" required><br>
            <button type="button" id="saveButton">Сохранить</button>
            <button type="button" id="searchButton">Поиск</button>
            <button type="button" id="clearStorageButton">Очистить хранилище</button>

        </form>
        <div id="result">
            <h2>Список студентов:</h2>
            <ul id="studentsList"></ul>
            <h2>Результаты поиска:</h2>
            <ul id="resultsList"></ul>
        </div>

        <h1>Генератор таблицы</h1>
        <label for="tableSize">Размер таблицы (n x n):</label>
        <input type="number" id="tableSize" min="2" value="4">
        <label for="maxSelected">Макс. выбранных в ряду:</label>
        <input type="number" id="maxSelected" min="1" value="1"><br>
        <button id="generateTable">Создать таблицу</button>
        <button id="addRowAndColumn">Добавить ряд и колонку</button>
        <button id="transposeTable">Транспонировать</button>
        <table id="myTable">
            <tr>
                <td>1</td>
            </tr>
        </table>

        <form id="settingsForm">
            <label>
                <input type="checkbox" id="fontCheckbox" onchange="toggleElement('fontSizeRange')"> Изменить размер шрифта
            </label>
            <div id="fontSizeRangeDiv"></div>
            
            <label>
                <input type="checkbox" id="colorCheckbox" onchange="toggleElement('textColorPicker')"> Изменить цвет текста
            </label>
            <div id="textColorPickerDiv"></div>
    
            <label>
                <input type="checkbox" id="backgroundCheckbox" onchange="toggleElement('backgroundColorPicker')"> Изменить цвет фона
            </label>
            <div id="backgroundColorPickerDiv"></div>
        </form>

        <div id="output"></div>
    </div>

    <script>
        const students = JSON.parse(localStorage.getItem('students')) || [];

        document.getElementById('studentsForm').addEventListener('submit', function (e) {
            e.preventDefault();
        });

        document.getElementById('saveButton').addEventListener('click', function () {
            const name = document.getElementById('name').value;
            const surname = document.getElementById('surname').value;
            const patronymic = document.getElementById('patronymic').value;
            const sex = document.getElementById('sex').value;
            const age = parseInt(document.getElementById('age').value);
            const course = parseInt(document.getElementById('course').value);

            const student = {
                name: name,
                surname: surname,
                patronymic: patronymic,
                sex: sex,
                age: age,
                course: course
            };

            students.push(student);
            localStorage.setItem('students', JSON.stringify(students));
            document.getElementById('studentsForm').reset();
        });

        document.getElementById('searchButton').addEventListener('click', function () {
            const studentsList = document.getElementById('studentsList');
            const resultsList = document.getElementById('resultsList');
            studentsList.innerHTML = '';
            resultsList.innerHTML = '';

            students.forEach(student => {
                const listItem = document.createElement('li');
                listItem.textContent = student.name + student.surname + student.patronymic;
                studentsList.appendChild(listItem);
            });

            // Создаем объект для подсчета количества студентов каждого пола на каждом курсе
            const courseStats = {};

            // Перебираем всех студентов
            students.forEach(student => {
                const { sex, course } = student;

                // Если курс еще не был добавлен в статистику, инициализируем его
                if (!courseStats[course]) {
                    courseStats[course] = { males: 0, total: 0 };
                }

                // Увеличиваем количество студентов на данном курсе и подсчитываем мужчин
                courseStats[course].total++;
                if (sex === 'male') {
                    courseStats[course].males++;
                }
            });

            // Находим курс с наибольшим процентом мужчин
            let maxPercentage = 0;
            let courseWithMaxPercentage;

            for (const course in courseStats) {
                const { males, total } = courseStats[course];
                const percentage = (males / total) * 100;

                if (percentage > maxPercentage) {
                    maxPercentage = percentage;
                    courseWithMaxPercentage = course;
                }
            }

            const listItem = document.createElement('li');
            listItem.textContent = 'На курсе ' + courseWithMaxPercentage + 'наибольший процент мужчин: ' + maxPercentage;
            resultsList.appendChild(listItem);
        });

        document.getElementById('clearStorageButton').addEventListener('click', function () {
            localStorage.clear();
            students.length = 0;
            const studentsList = document.getElementById('studentsList');
            studentsList.innerHTML = '';
            const resultsList = document.getElementById('resultsList');
            resultsList.innerHTML = '';
        });
    </script>

    <script>
        document.getElementById('generateTable').addEventListener('click', generateTable);
        document.getElementById('addRowAndColumn').addEventListener('click', addRowAndColumn);
        document.getElementById('transposeTable').addEventListener('click', transposeTable);
        document.getElementById('myTable').addEventListener('click', highlightCell);

        let tableSize = 4;
        let maxSelected = 1;

        function generateTable() {
            tableSize = parseInt(document.getElementById('tableSize').value);
            maxSelected = parseInt(document.getElementById('maxSelected').value);

            let table = document.getElementById('myTable');
            table.innerHTML = '';

            for (let i = 0; i < tableSize; i++) {
                let row = document.createElement('tr');
                for (let j = 0; j < tableSize; j++) {
                    let cell = document.createElement('td');
                    cell.textContent = Math.floor(Math.random() * 100) + 1;
                    row.appendChild(cell);
                }
                table.appendChild(row);
            }
        }

        function addRowAndColumn() {
            tableSize++;
            addRowToTable();
            addColumnToTable();
        }

        function addRowToTable() {
            let table = document.getElementById('myTable');
            let newRow = document.createElement('tr');
            for (let i = 0; i < tableSize - 1; i++) {
                let newCell = document.createElement('td');
                newCell.textContent = Math.floor(Math.random() * 100) + 1;
                newRow.appendChild(newCell);
            }
            table.appendChild(newRow);
        }

        function addColumnToTable() {
            let table = document.getElementById('myTable');
            let rows = table.getElementsByTagName('tr');
            for (let i = 0; i < tableSize; i++) {
                let newCell = document.createElement('td');
                newCell.textContent = Math.floor(Math.random() * 100) + 1;
                rows[i].appendChild(newCell);
            }
        } 

        function highlightCell(e) {
            if (e.target.nodeName === 'TD') {
                const selectedCount = countSelectedInRow(e.target.parentNode);
                if (selectedCount >= maxSelected || hasNeighboringSelection(e.target)) {
                    return;
                }

                e.target.style.backgroundColor = isMultipleOfTwo(e.target.textContent) ? 'lightblue' : 'lightcoral';
            }
        }

        function countSelectedInRow(row) {
            let count = 0;
            const cells = row.getElementsByTagName('td');
            for (let i = 0; i < cells.length; i++) {
                if (cells[i].style.backgroundColor !== '') {
                    count++;
                }
            }
            return count;
        }

        function isMultipleOfTwo(value) {
            return parseInt(value) % 2 === 0;
        }

        function hasNeighboringSelection(cell) {
            const row = cell.parentNode;
            const cells = row.getElementsByTagName('td');
            const index = [...cells].indexOf(cell);
            const leftNeighbor = index > 0 ? cells[index - 1] : null;
            const rightNeighbor = index < cells.length - 1 ? cells[index + 1] : null;
            return (leftNeighbor && leftNeighbor.style.backgroundColor !== '') || (rightNeighbor && rightNeighbor.style.backgroundColor !== '');
        }

        function transposeTable() {
            let table = document.getElementById('myTable');
            let rows = table.getElementsByTagName('tr');
            
            for (let i = 0; i < tableSize; i++) {
                for (let j = i + 1; j < tableSize; j++) {
                    let cell_1 = rows[i].getElementsByTagName('td')[j];
                    let cell_2 = rows[j].getElementsByTagName('td')[i];
        
                    let tempValue = cell_1.textContent;
                    cell_1.textContent = cell_2.textContent;
                    cell_2.textContent = tempValue;
                }
            }
        }
    </script>

    <script>
        function createFontElement() {
            const fontSizeRange = document.createElement('input');
            fontSizeRange.type = 'range';
            fontSizeRange.id = 'fontSizeRange';
            fontSizeRange.min = '10';
            fontSizeRange.max = '36';
            fontSizeRange.step = '2';
            fontSizeRange.value = '16'
            fontSizeRange.addEventListener('input', applyFontSettings);
        
            const container = document.getElementById("fontSizeRangeDiv");
            if (container) {
                container.appendChild(fontSizeRange);
            }
        }
        
        function removeFontElement() {
            const fontSizeRange = document.getElementById('fontSizeRange');
            if (fontSizeRange) {
                fontSizeRange.removeEventListener('input', applyFontSettings);
                fontSizeRange.remove();
            }
        }
        
        function createColorElement() {
            const textColorPicker = document.createElement('input');
            textColorPicker.type = 'color';
            textColorPicker.id = 'textColorPicker';
            textColorPicker.addEventListener('input', applyColorSettings);
        
            const container = document.getElementById("textColorPickerDiv");
            if (container) {
                container.appendChild(textColorPicker);
            }
        }
        
        function removeColorElement() {
            const textColorPicker = document.getElementById('textColorPicker');
            if (textColorPicker) {
                textColorPicker.removeEventListener('input', applyColorSettings);
                textColorPicker.remove();
            }
        }
        
        function createBackgroundElement() {
            const backgroundColorPicker = document.createElement('input');
            backgroundColorPicker.type = 'color';
            backgroundColorPicker.id = 'backgroundColorPicker';
            backgroundColorPicker.value = '#ffffff'
            backgroundColorPicker.addEventListener('input', applyBackgroundSettings);
        
            const container = document.getElementById("backgroundColorPickerDiv");
            if (container) {
                container.appendChild(backgroundColorPicker);
            }
        }
        
        function removeBackgroundElement() {
            const backgroundColorPicker = document.getElementById('backgroundColorPicker');
            if (backgroundColorPicker) {
                backgroundColorPicker.removeEventListener('input', applyBackgroundSettings);
                backgroundColorPicker.remove();
            }
        }

        document.getElementById('fontCheckbox').addEventListener('change', function () {
            if (this.checked) {
                createFontElement();
            } else {
                removeFontElement();
            }
        });

        document.getElementById('colorCheckbox').addEventListener('change', function () {
            if (this.checked) {
                createColorElement();
            } else {
                removeColorElement();
            }
        });

        document.getElementById('backgroundCheckbox').addEventListener('change', function () {
            if (this.checked) {
                createBackgroundElement();
            } else {
                removeBackgroundElement();
            }
        });

        function applyFontSettings() {
            const fontSizeRange = document.getElementById('fontSizeRange');
            document.body.style.fontSize = fontSizeRange.value + 'px';
        }

        function applyColorSettings() {
            const textColorPicker = document.getElementById('textColorPicker');
            document.body.style.color = textColorPicker.value;
        }

        function applyBackgroundSettings() {
            const backgroundColorPicker = document.getElementById('backgroundColorPicker');
            document.body.style.backgroundColor = backgroundColorPicker.value;
            //const elements = document.getElementsByClassName('container');
            //for (const element of elements) {
                //element.style.backgroundColor = backgroundColorPicker.value;
            //}
        }

    </script>

    <script>
        function ObjectOfInsurance(name, cost) {
            this._name = name;
            this._cost = cost;
        }
        
        ObjectOfInsurance.defineProperty(ObjectOfInsurance.prototype, 'objectInfo', {
            get: function () {
                return this._name + 'costs' + this._cost;
            }
        });
        
        ObjectOfInsurance.defineProperty(ObjectOfInsurance.prototype, 'name', {
            get: function () {
                return this._name;
            },
            set: function (newName) {
                this._name = newName;
            }
        });
        
        function Car(name, cost, insuranceCategory) {
            ObjectOfInsurance.call(this, name, cost);
            this._insuranceCategory = insuranceCategory;
        }
        
        // Наследование прототипа
        Car.prototype = ObjectOfInsurance.create(ObjectOfInsurance.prototype);
        Car.prototype.constructor = Car;
        
        ObjectOfInsurance.defineProperty(Car.prototype, 'insuranceCategory', {
            get: function () {
                return this._insuranceCategory;
            },
            set: function (newInsuranceCategory) {
                this._insuranceCategory = newInsuranceCategory;
            }
        });
        
        const objectOfInsurance = new ObjectOfInsurance("House", 50000);
        document.getElementById('output').innerText = 'Object name: ' + objectOfInsurance.name;
        
        const car = new Car("BMW", 15000, "Autoinsurance");
        document.getElementById('output').innerText += '\nCar name: ' + car.name;
        document.getElementById('output').innerText += '\nCar insurance category: ' + car.insuranceCategory;
    </script>

    <script>
        class O {
            constructor(name, cost) {
                this._name = name;
                this._cost = cost;
            }

            objectInfo() {
                return this._name + 'costs' + this._cost;
            }

        }
        
        class C extends O {
            constructor(name, cost, insuranceCategory, insuredRisks) {
                super(name, cost);
                this._insuranceCategory = insuranceCategory;
                this._insuredRisks = insuredRisks;
            }
        
            get insuranceCategory() {
                return this._insuranceCategory;
            }
        
            set insuranceCategory(newInsuranceCategory) {
                this._insuranceCategory = newInsuranceCategory;
            }
        
            get insuredRisks() {
                return this._insuredRisks;
            }
        
            changeInsuredRisks(newInsuredRisks) {
                this._insuredRisks = newInsuredRisks;
                document.getElementById('output').innerText += '\nInsuredRisks of object ' + this._name + ' was changed to ' + this._insuredRisks;
            }
        }
        
    
        // Демонстрация использования
        const o = new O("House", 50000);
        document.getElementById('output').innerText += '\nObject info: ' + o.objectInfo();
        
        const c = new C("BMW", 15000, "AutoInsurance");
        document.getElementById('output').innerText += '\nAuto info: ' + c.objectInfo();
        document.getElementById('output').innerText += '\nInsurance category: ' + c.insuranceCategory;
        c.changeInsuredRisks("MEDIUM");
    
    </script>
</body>
</html>
